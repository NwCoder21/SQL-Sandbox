# Refining Selections

In this section will be focusing on some more advanced MySQL features, things like limiting the number of results that we get back. For example, instead of 500 results,  maybe we want only want five results to be returned.

Then will also cover how to sort our results. Maybe by sales, alphbetically or by genre for example.

---

<!-- Lesson 112 - Adding Some New Books --> 

# Adding Some New Books

![image](https://user-images.githubusercontent.com/107522496/207892525-a0acd893-2939-4de8-a40d-148dadab08ad.png)

Add some more entries to the book table. 

```sql
INSERT INTO books
    (title, author_fname, author_lname, released_year, stock_quantity, pages)
    VALUES ('10% Happier', 'Dan', 'Harris', 2014, 29, 256), 
           ('fake_book', 'Freida', 'Harris', 2001, 287, 428),
           ('Lincoln In The Bardo', 'George', 'Saunders', 2017, 1000, 367);
```

---

<!-- Lesson 114 - DISTINCT--> 

# `DISTINCT`

`DISTINCT` allows us to return only unique results and removes duplicate results.

![image](https://user-images.githubusercontent.com/107522496/207893260-99735fbf-43f0-4c9b-9f13-78e881c73443.png)

This is what a typical DISTINCT statement looks like.

IMPORTANT: `DISTINCT` comes after `SELECT` and before a column name. 

---

![image](https://user-images.githubusercontent.com/107522496/207893764-5c04455e-3b35-41ef-91cc-655deec14efd.png)

Here we can see duplicate results, such as Gaiman, Eggers, Foster Wallace, Harris.

---

![image](https://user-images.githubusercontent.com/107522496/207894122-1c70bba4-1891-4377-8fa9-842b1e75e62b.png)
 
 Using `SELECT DISTINCT author_lname FROM books;` we will now only get one of each. 

---

Another example is:

![image](https://user-images.githubusercontent.com/107522496/207894479-c61859da-d70b-4a12-979a-55e3eed134e3.png)

Here, we have duplicates of 2001, 2003. 

---

By using `DISTINCT`, we can only have unique results returned.

![image](https://user-images.githubusercontent.com/107522496/207895783-e682cf24-eadf-40ca-8cac-bbb19282396c.png)

---

# How do we get DISTINCT Author Full Names?

![image](https://user-images.githubusercontent.com/107522496/207899165-a9dabf4e-8223-4c2d-9cca-94e4c057ddbd.png)

At the moment, when we run: 

```sql
SELECT author_fname, author_lname FROM books;
```

we get several results which have the same last name, for example Dan Harris and Freida Harris. At moment, when we run `SELECT DISTINCT author_lname FROM books;`, we lose one of them. SO, how do we get DISTINCT author full names?

Two ways to do this:

1. Using CONCAT: so, concat first name and last name with a space in between and then find the DISTINCT results of this:

![image](https://user-images.githubusercontent.com/107522496/207900412-40811300-e39e-4206-95c2-9c28ab23f38f.png)

And then we only want the DISTINCT of these results because at the moment, 'David Foster Wallace', 'Neil Gaiman', 'Dave Eggers', 'Raymond Carver' have dupliccates. 
Whereas, 'Dan Harris' and 'Freida Harris' would now be considered unique. 


---

![image](https://user-images.githubusercontent.com/107522496/207902007-114582f8-58f6-4d39-8f58-a9e538241024.png)

we can then add DISTINCT to get only unique results.

---

2. Use DISTINCT on the first name column only. 


![image](https://user-images.githubusercontent.com/107522496/207903833-ee6ea91c-b2ee-4a4f-a9f1-79ca90a7d807.png)

This is saying to select the distinct first name and last name combinations.

---


<!-- Lesson 116 - ORDER BY--> 

# ORDER BY

In this lesson we will learn how to sort our data. 

---

![image](https://user-images.githubusercontent.com/107522496/207905568-7ee6635c-ffff-4548-a898-ed97c7ba3502.png)

At the moment, data is sorted but according to the order the data is in the database. 

---

![image](https://user-images.githubusercontent.com/107522496/207906684-ec96e158-68bb-483b-9ca1-9fefd1f3f564.png)

For example, if we add another entry to the table, it goes to the bottom.

But let's say we want to order it according to something else, such as by the year or alphabetically, etc. The way we can do this is by using `ORDER BY`.

![image](https://user-images.githubusercontent.com/107522496/207907231-f0954238-93a4-4dc3-ae78-e35797f7f84d.png)

It comes after the SElECT, (after whatever we want to select). After the `ORDER BY`, we will have a column name. 

---

For example:

![image](https://user-images.githubusercontent.com/107522496/207908768-a24886d7-98fb-4345-943c-8fa3e77f177b.png)

This is sorted, by default, by book_id.

---

![image](https://user-images.githubusercontent.com/107522496/207908919-aa83759a-4231-424e-8384-b154271f9b75.png)

However, now we have ordered it according to the release year. 

```sql
SELECT book_id, title, author_fname, author_lname, released_year FROM books
ORDER BY released_year;
```

---

![image](https://user-images.githubusercontent.com/107522496/207912688-f734fb1d-5fde-47cb-bcfe-e9b731d102eb.png)


Here, we have sorted the results according to the author's last name in ascending order.


---

# `DESC`

IMPORTANT: By default, `ORDER BY` sorts by ASCENDING. Alphabetically that means going from A to Z, numerically that means from 0 onwards.

We can change this by:

![image](https://user-images.githubusercontent.com/107522496/207910609-345713c3-a6bf-45c3-b45a-e75de8cfe8f8.png)

specyfying `DESC` (descending order). 

![image](https://user-images.githubusercontent.com/107522496/207911780-1047cc1b-ba21-4223-b121-60dd09de5764.png)

We can now see that the results are sorted in descending order according to the year.

---

![image](https://user-images.githubusercontent.com/107522496/207912908-bbc8c310-bbe3-401d-b90c-650a1f305680.png)

In this example, we have sorted the results according to the author's last name in descending order. 

---

# `ASC`

![image](https://user-images.githubusercontent.com/107522496/207912405-fcdc4492-4ea6-439f-b233-0fc546c5b56a.png)

Can use `ASC` to sort results in Ascending order.

---

![image](https://user-images.githubusercontent.com/107522496/207915588-11088561-3b6c-471d-a5df-ee6782acd2c3.png)

What happens if we order by the `released_year` but don't even select `released_year` in the SELECT query. Well, we can check by adding it to the `SELECT` query:

![image](https://user-images.githubusercontent.com/107522496/207916613-f01e47b7-2c41-4f48-8b43-d79818d9f26a.png)

We can see the output stays the same. This means even if we don't select a column in the SELECT statement, it will still sort by that column if we reference it after the `ORDER BY` statement. 

This is probably not that common to sort by or order by some column that you're not even selecting because you won't be able to see the values that you're sorting by, but you can do it.

---

![image](https://user-images.githubusercontent.com/107522496/208117703-93220ca7-ba0f-4af8-8fa5-7e751c9de301.png)

We may come across something like this, `ORDER BY` followed by a number. Basically, it is a shorthand syntax that says ordered by the second column that we're selecting.

So in the above example, it means `ORDER BY` `author_fname`

---

![image](https://user-images.githubusercontent.com/107522496/208119316-288df4f8-9e1a-4c51-b482-f973c6c299ac.png)

In this example, we are ordering by the `released_year` as this is the third column in the `SELECT` column. 

---

The other option to order by released_year would have been:

![image](https://user-images.githubusercontent.com/107522496/208121316-751f50a1-eaaa-4b4f-8850-4cd9b85a497e.png)

Same output as before, however slightly longer to write. 

---

![image](https://user-images.githubusercontent.com/107522496/208122224-aafb5b8b-2c97-42b3-a695-666502cb2d78.png)

Can still use `ASC` or `DESC` even when using a number after `ORDER BY`.

---

# Ordering by Multiple Columns   

![image](https://user-images.githubusercontent.com/107522496/208122435-400f8880-776a-4ad8-902a-12638d4fccfe.png)

Can also order by multiple columns.

When we do this, we'll sort by one column first and then secondly, we'll sort by the second column and so on. For example:

![image](https://user-images.githubusercontent.com/107522496/208123814-67d5db94-d7d0-4775-81ed-e758cf861845.png)

Here, we have results which have not yet been sorted. Now let's sort them by author's last name:

![image](https://user-images.githubusercontent.com/107522496/208124450-e61572c4-326a-4be5-88ac-f1a4313f7b7a.png)

We have now ordered them according to author's last name, however, each grouping's dates are still not in order. So, we can 'Order by Multiple Columns' to further sort this data out according to the date they were released:

![image](https://user-images.githubusercontent.com/107522496/208124985-fd0ed4b5-1bde-4963-8738-a6f978c5de6d.png)

> So secondarily, I could add on `released_year` after `author_lname` in my `ORDER BY`.

Now the data is ordered by author's last name and then once each authors names have been grouped, the rowsare ordered according to the release year. 

In other words, each grouping, such as Eggers, Carver, etc, has now been ordered according to release year.

---

![image](https://user-images.githubusercontent.com/107522496/208125697-28ed5948-6eb6-409f-8190-d320f00a04dd.png)

In 

```sql
SELECT title, author_lname, released_year FROM books 
ORDER BY author_lname, released_year DESC;
```
We are still sorting according to ascending for `author_lname`, that happens first, all the rows are going to be ordered by `author_lname`, alphabetically A to Z. And then after that we will sort by `released_year` and this is descending.

---

Next thing to learn about `ORDER BY` is that we can also order by columns that aren't necessarily part of the table, but our results are values that we've asked SQL for.

In other words, we can sort by aliases (`AS`) we have creeted for the results.

![image](https://user-images.githubusercontent.com/107522496/208127136-6f6f921e-149b-4d7b-aff1-487aa33aea02.png)

In this example, we are referencing `Author` which is an alias which we have created in the `ORDER BY` statement. 

---



















