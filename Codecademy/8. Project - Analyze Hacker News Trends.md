# Project - Analyze Hacker News Trends

![image](https://user-images.githubusercontent.com/107522496/210805059-a4ba3802-ed5a-49dd-9e2c-6c2958a0ace3.png)


---

The hacker_news table has the following columns:

* title
* user
* score
* timstamp
* url 
---

Step 1: start by getting a feel for the hacker_news table!

Let’s find the most popular Hacker News stories:

```sql
SELECT title, score
FROM hacker_news
ORDER BY score DESC
LIMIT 5;
```

What are the top five stories with the highest scores?

![image](https://user-images.githubusercontent.com/107522496/210808753-e6dc8c20-450e-4be2-8d14-7b22123876be.png)

HINT:
Using `LIMIT` caps the number of rows in the result.

It is a simple way to keep queries from taking too long to run if you are dealing with a big dataset.

`ORDER BY` simply sorts the score column.

The most popular stories are:

* ‘Penny Arcade - Surface Pro 3 update’
* ‘Hacking The Status Game’
* ‘Postgres CLI with autocompletion and syntax highlighting’
* ‘Stephen Fry hits out at ‘infantile’ culture of trigger words and safe spaces’
* ‘Reversal: Australian Govt picks ODF doc standard over Microsoft’

---

## Hacker News Moderating

Step 2: Recent studies have found that online forums tend to be dominated by a small percentage of their users (1-9-90 Rule).

Is this true of Hacker News?

Is a small percentage of Hacker News submitters taking the majority of the points?

First, find the total score of all the stories.

![image](https://user-images.githubusercontent.com/107522496/210809465-488c86b8-a750-4024-9b38-0b8333cc4ca4.png)

The total score of this table is 6366.

---

Step 3: Next, we need to pinpoint the users who have accumulated a lot of points across their stories.

Find the individual users who have gotten combined scores of more than 200, and their combined scores.

`GROUP BY` and `HAVING` are needed!

![image](https://user-images.githubusercontent.com/107522496/210810059-206cb93e-bcab-4aa4-a894-f2b0ef141478.png)

```sql
SELECT user, SUM(score)
FROM hacker_news
GROUP BY user
HAVING SUM(score) > 200
ORDER BY 2 DESC;
```

`HAVING` does not support aliases in the same way that `ORDER BY` does, so use the full column name.

---

Step 4: Then, we want to add these users’ scores together and divide by the total to get the percentage.

Add their scores together and divide it by the total sum. Like so:

`SELECT (1.0 + 2.0 + 3.0) / 6.0;`

So, is Hacker News dominated by these users?

![image](https://user-images.githubusercontent.com/107522496/210810681-d60559bb-4e6d-4a9e-a5a1-8d579f5371ac.png)

That is ≈ 22%.

These 4 users have a combined 22% of the total scores in the table. 

---

Step 5: How many times has each offending user posted this link? The url of the video is: `https://www.youtube.com/watch?v=dQw4w9WgXcQ`

![image](https://user-images.githubusercontent.com/107522496/210812227-496ac654-cf6d-45b7-affd-e4d58edf057b.png)

You can `GROUP BY` the users and use `WHERE` to restrict url:

```sql
SELECT user, COUNT(*)
FROM hacker_news
WHERE url LIKE '%watch?v=dQw4w9WgXcQ%'
GROUP BY user
ORDER BY COUNT(*) DESC;
```

Rewrite this using column reference numbers instead of column names:

-- Hacker News Moderating

```sql
SELECT user, COUNT(*)
FROM hacker_news
WHERE url LIKE '%watch?v=dQw4w9WgXcQ%'
GROUP BY 1
ORDER BY 2 DESC;
```

Dear @sonnynomnom, you’re banned.
Dear @scorpiosister, warning!

---

### Which sites feed Hacker News?

---


Step 6: Hacker News stories are essentially links that take users to other websites.

Which of these sites feed Hacker News the most:

GitHub, Medium, or New York Times?

First, we want to categorize each story based on their source.

We can do this using a `CASE` statement:

```sql
SELECT CASE
   WHEN url LIKE '%github.com%' THEN 'GitHub'
   -- WHEN statement here
   -- WHEN statement here
   -- ELSE statement here
  END AS 'Source'
FROM hacker_news;
```
Fill in the other WHEN statements and the ELSE statement

![image](https://user-images.githubusercontent.com/107522496/210813957-580f4a25-a89e-4f8c-ae6d-92a2bf8262b5.png)

HINT:
Your query should look like:

```sql
SELECT CASE
   WHEN url LIKE '%github.com%' THEN 'GitHub'
   WHEN url LIKE '%medium.com%' THEN 'Medium'
   WHEN url LIKE '%nytimes.com%' THEN 'New York Times'
   ELSE 'Other'
  END AS 'Source'
FROM hacker_news;
```

`--` starts a single line comment. The text after `--` will be ignored (not executed).

Note: If we want to be more accurate, we should use `url LIKE '%github%'` because some GitHub pages end with .io instead of .com.

---

Step 7: Next, build on the previous query:

Add a column for the number of stories from each URL using COUNT().

Also, `GROUP BY` the `CASE` statement.

Remember that you can refer to a column in `GROUP BY` using a number.

![image](https://user-images.githubusercontent.com/107522496/210815110-3a63c6ad-d0ee-4de8-a6fa-9af9484583b9.png)





















