# Multiple Tables

# Introduction

In order to efficiently store data, we often spread related information across multiple tables.

For instance, imagine that we’re running a magazine company where users can have different types of subscriptions to different products. Different subscriptions might have many different properties. Each customer would also have lots of associated information.

We could have one table with all of the following information:

* order_id
* customer_id
* customer_name
* customer_address
* subscription_id
* subscription_description
* subscription_monthly_price
* subscription_length
* purchase_date

However, a lot of this information would be repeated. If the same customer has multiple subscriptions, that customer’s name and address will be reported multiple times. If the same subscription type is ordered by multiple customers, then the subscription price and subscription description will be repeated. This will make our table big and unmanageable.

So instead, we can split our data into three tables:

1. orders would contain just the information necessary to describe what was ordered:

    order_id, customer_id, subscription_id, purchase_date

2. subscriptions would contain the information to describe each type of subscription:

    subscription_id, description, price_per_month, subscription_length

3. customers would contain the information for each customer:

    customer_id, customer_name, address

In this lesson, we’ll learn the SQL commands that will help us work with data that is stored in multiple tables.

---

# Practise 

Examine these tables by pasting the following code into the editor:

```sql
SELECT *
FROM orders
LIMIT 5;
 
SELECT *
FROM subscriptions
LIMIT 5;
 
SELECT * 
FROM customers
LIMIT 5;
```

![image](https://user-images.githubusercontent.com/107522496/211774633-d60b610a-c708-43a3-8955-6e1e159f6984.png)



---

# orders Table 

![image](https://user-images.githubusercontent.com/107522496/211774840-402930b3-5b40-4f1e-8107-c16b6d98c07a.png)

---

# subscriptions Table

![image](https://user-images.githubusercontent.com/107522496/211774940-064de576-c59f-4be0-b35f-a19bea6a181d.png)

---

# customers Table

![image](https://user-images.githubusercontent.com/107522496/211775114-d03fc312-9de4-4e31-b94b-1c601d2e1005.png)


---

# Combining Tables Manually

Let’s return to our magazine company. Suppose we have the three tables described in the previous exercise – shown in the browser on the right (we are going to try something new!):

* orders
* subscriptions
* customers

![image](https://user-images.githubusercontent.com/107522496/211784701-cfef2a7b-b24d-4299-ae48-20d9061da03a.png)


If we just look at the orders table, we can’t really tell what’s happened in each order. However, if we refer to the other tables, we can get a complete picture.

Let’s examine the order with an order_id of 2. It was purchased by the customer with a customer_id of 2.

To find out the customer’s name, we look at the customers table and look for the item with a customer_id value of 2. We can see that Customer 2’s name is ‘Jane Doe’ and that she lives at ‘456 Park Ave’.

Doing this kind of matching is called joining two tables.

---

# Instructions

Step 1: Using the tables displayed, what is the description of the magazine ordered in order_id 1?

Type your answer on line 1 of the code editor.

Be sure to capitalize it the same as in the table.

Answer: Sports Magazine

HINT:

First, we look at the orders table.

The order with an order_id of 1 is in the first row. Its subscription_id is 3.

Then we look at the subscriptions table.

The subscription with a subscription_id of 3 is in the third row. Its description is Sports Magazine.

Answer: Sports Magazine

Don’t write a query for this exercise!

---

Step 2: Using the tables displayed, what is the customer_name of the customer in order_id 3?

Be sure to capitalize it the same as in the table.

Answer: Joe Schmo

---

# Combining Tables with SQL

Combining tables manually is time-consuming. Luckily, SQL gives us an easy sequence for this: it’s called a JOIN.

If we want to combine orders and customers, we would type:

```sql
SELECT *
FROM orders
JOIN customers
  ON orders.customer_id = customers.customer_id;
```

Let’s break down this command:

 * The first line selects all columns from our combined table. If we only want to select certain columns, we can specify which ones we want.
 * The second line specifies the first table that we want to look in, orders
 * The third line uses `JOIN` to say that we want to combine information from orders with customers.
 * The fourth line tells us how to combine the two tables. We want to match orders table’s customer_id column with customers table’s customer_id column.

Because column names are often repeated across multiple tables, we use the syntax `table_name.column_name` to be sure that our requests for columns are unambiguous. In our example, we use this syntax in the `ON` statement, but we will also use it in the SELECT or any other statement where we refer to column names.

For example: Instead of selecting all the columns using `*`, if we only wanted to select orders table’s order_id column and customers table’s customer_name column, we could use the following query:

```sql
SELECT orders.order_id,
   customers.customer_name
FROM orders
JOIN customers
```

---

# Practise 

Join orders table and subscriptions table and select all columns.

Make sure to join on the `subscription_id` column.









